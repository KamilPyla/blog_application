<%= form_with(model: user, method: :post, url: users_update_profile_path(user.uuid)) do |form| %>
  <div class="form-group mb-2">
    <%= form.label :first_name %>
    <%= form.text_field :first_name, class: "form-control" %>
  </div>

  <div class="form-group mb-2">
    <%= form.label :last_name %>
    <%= form.text_field :last_name, class: "form-control" %>
  </div>

  <div class="form-group mb-2">
    <%= form.label :login %>
    <%= form.text_field :login, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :about_me %>
    <%= form.rich_text_area :about_me, class: "form-control mb-2" %>
  </div>

  <%= content_tag :div, class: "form-group", data: { controller: 'image-upload-preview' } do %>
    <%= form.label :avatar %>
    <%= form.file_field :avatar, class: "form-control", data: { target: 'image-upload-preview.input', action: 'image-upload-preview#setImagePreview' }%>
    <%= image_tag user.avatar_preload, class: 'my-3', 
          data: { target: 'image-upload-preview.preview' }  if user %>
  <% end %>

  <div class="form-group mb-2">
    <%= form.label :password %>
    <%= form.password_field :password, autocomplete: :off, class: "form-control" %>
  </div>

  <div>
    <%= form.submit 'Zapisz', class: 'btn btn-success' %>
  </div>

<% end %>
